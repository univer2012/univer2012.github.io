<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>SengolnHuang&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="SengolnHuang's blog">
<meta property="og:url" content="https://univer2012.github.io/index.html">
<meta property="og:site_name" content="SengolnHuang's blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SengolnHuang's blog">
  
    <link rel="alternate" href="/atom.xml" title="SengolnHuang&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">SengolnHuang&#39;s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">关注技术，分享生活</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://univer2012.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-6how-to-insert-picture-in-hexo-blog" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/23/6how-to-insert-picture-in-hexo-blog/" class="article-date">
  <time datetime="2017-04-22T19:08:00.000Z" itemprop="datePublished">2017-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/如何搭建个人博客/">如何搭建个人博客</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/23/6how-to-insert-picture-in-hexo-blog/">hexo博客中如何插入图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、把根目录下的配置文件<code>_config.yml</code>里的<code>post_asset_folder</code>选项设置为<code>true</code>；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># 文章配置</div><div class="line"># 这个地方一般直接取默认值不用修改</div><div class="line"># Writing</div><div class="line">new_post_name: :title.md # File name of new posts # 新文章的文件名称</div><div class="line">default_layout: post # 预设布局</div><div class="line">titlecase: false # Transform title into titlecase # 把标题转换为 titlecase（titlecase指的是将每个单词首字母转换成大写）</div><div class="line">external_link: true # Open external links in new tab # 在新标签中打开链接</div><div class="line">filename_case: 0 # 把文件名称转换为 (1) 小写或 (2) 大写, 0表示不变</div><div class="line">render_drafts: false # 显示草稿</div><div class="line">post_asset_folder: true # 启动 Asset 文件夹</div><div class="line">relative_link: false # 启动 Asset 文件夹</div><div class="line">future: true # 显示未来的文章</div><div class="line">highlight: # 代码块的设置</div><div class="line">  enable: true</div><div class="line">  line_number: true # 是否显示行号</div><div class="line">  auto_detect: false # 是否自动监测</div><div class="line">  tab_replace: # 将 tab 替换成其他字符串</div></pre></td></tr></table></figure>
<p>2、在你的hexo目录下执行这句话<code>npm install hexo-asset-image --save</code>，这是下载安装一个可以上传本地图片的插件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:hexo-blog huangaengoln$ npm install hexo-asset-image --save</div><div class="line">(node:59464) fs: re-evaluating native module sources is not supported. If you are using the graceful-fs module, please update it to a more recent version.</div><div class="line">hexo-site@0.0.0 /Users/huangaengoln/Documents/hexo-blog</div><div class="line">└─┬ hexo-asset-image@0.0.3 </div><div class="line">  └─┬ cheerio@0.19.0 </div><div class="line">    ├─┬ css-select@1.0.0 </div><div class="line">    │ ├── css-what@1.0.0 </div><div class="line">    │ └── domutils@1.4.3 </div><div class="line">    └── lodash@3.10.1 </div><div class="line"></div><div class="line">huangsengolndeMacBook-Pro:hexo-blog huangaengoln$</div></pre></td></tr></table></figure>
<p>3、下载完成后，下次再执行<code>hexo n &quot;1How-to-change-App-theme-color&quot;</code>来生成md博文时，<code>/source/_posts</code>文件夹内除了<code>1How-to-change-App-theme-color.md</code>文件，还有一个与之同名的文件夹；<br><img src="/2017/04/23/6how-to-insert-picture-in-hexo-blog/pic1.png" alt=""></p>
<p>4、最后在<code>1How-to-change-App-theme-color.md</code>中想引入图片时，先把图片复制到<code>md</code>对应的文件夹<code>1How-to-change-App-theme-color</code>中，然后只需要<code>1How-to-change-App-theme-color.md</code>中按照markdown的格式引入图片：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">![你想输入的替代文字](xxxx/图片名.jpg)</div></pre></td></tr></table></figure>
<p>**注意：xxxx是这个md文件的名字，也是同名文件夹的名字，你想引入的图片就只需要放入xxxx这个文件夹内就好了，很像引用相对路径。</p>
<p>5 最后检查一下，<code>hexo g</code>生成页面后，进入<code>public\2017\02\26\index.html</code>文件中查看相关字段，可以发现，html标签内的语句是<code>&lt;img src=&quot;2017/02/26/xxxx/图片名.jpg&quot;&gt;</code>，而不是<code>&lt;img src=&quot;xxxx/图片名.jpg&gt;</code>。这很重要，关乎你的网页是否可以真正加载你想插入的图片。</p>
<hr>
<p>— 完</p>
<p>来自：<a href="http://blog.csdn.net/sugar_rainbow/article/details/57415705" target="_blank" rel="external">hexo生成博文插入图片</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://univer2012.github.io/2017/04/23/6how-to-insert-picture-in-hexo-blog/" data-id="cj1tn2ti10008h7fch1gaacii" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-5how-to-issue-blog" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/23/5how-to-issue-blog/" class="article-date">
  <time datetime="2017-04-22T19:05:44.000Z" itemprop="datePublished">2017-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/如何搭建个人博客/">如何搭建个人博客</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/23/5how-to-issue-blog/">怎样发布博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>设置git身份信息：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:hexo-blog huangaengoln$ git config --global user.name &quot;univer2012&quot;</div><div class="line">huangsengolndeMacBook-Pro:hexo-blog huangaengoln$ git config --global user.email &quot;1054880335@qq.com&quot;</div></pre></td></tr></table></figure>
<ul>
<li>安装hexo git插件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:hexo-blog huangaengoln$ npm install hexo-deployer-git --save</div><div class="line">(node:59100) fs: re-evaluating native module sources is not supported. If you are using the graceful-fs module, please update it to a more recent version.</div><div class="line">hexo-site@0.0.0 /Users/huangaengoln/Documents/hexo-blog</div><div class="line">└── hexo-deployer-git@0.2.0 </div><div class="line"></div><div class="line">huangsengolndeMacBook-Pro:hexo-blog huangaengoln$</div></pre></td></tr></table></figure>
<ul>
<li>发布更新博客</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:hexo-blog huangaengoln$ hexo d -g</div><div class="line">INFO  Start processing</div><div class="line">INFO  Files loaded in 375 ms</div><div class="line">INFO  Generated: 2017/04/23/1How-to-change-App-theme-color/index.html</div><div class="line">INFO  Generated: archives/2017/04/index.html</div><div class="line">INFO  Generated: 2017/04/22/hello-world/index.html</div><div class="line">INFO  Generated: index.html</div><div class="line">INFO  Generated: archives/2017/index.html</div><div class="line">INFO  Generated: archives/index.html</div><div class="line">INFO  Generated: tags/thinkive/index.html</div><div class="line">INFO  Generated: fancybox/fancybox_loading.gif</div><div class="line">INFO  Generated: fancybox/fancybox_sprite.png</div><div class="line">INFO  Generated: fancybox/blank.gif</div><div class="line">INFO  Generated: fancybox/fancybox_overlay.png</div><div class="line">INFO  Generated: fancybox/fancybox_loading@2x.gif</div><div class="line">INFO  Generated: fancybox/fancybox_sprite@2x.png</div><div class="line">INFO  Generated: css/fonts/FontAwesome.otf</div><div class="line">INFO  Generated: fancybox/helpers/fancybox_buttons.png</div><div class="line">INFO  Generated: css/fonts/fontawesome-webfont.woff</div><div class="line">INFO  Generated: css/fonts/fontawesome-webfont.eot</div><div class="line">INFO  Generated: css/fonts/fontawesome-webfont.ttf</div><div class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-buttons.js</div><div class="line">INFO  Generated: fancybox/jquery.fancybox.css</div><div class="line">INFO  Generated: js/script.js</div><div class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-thumbs.css</div><div class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-buttons.css</div><div class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-thumbs.js</div><div class="line">INFO  Generated: fancybox/helpers/jquery.fancybox-media.js</div><div class="line">INFO  Generated: css/style.css</div><div class="line">INFO  Generated: fancybox/jquery.fancybox.js</div><div class="line">INFO  Generated: fancybox/jquery.fancybox.pack.js</div><div class="line">INFO  Generated: css/fonts/fontawesome-webfont.svg</div><div class="line">INFO  Generated: css/images/banner.jpg</div><div class="line">INFO  30 files generated in 1.27 s</div><div class="line">INFO  Deploying: git</div><div class="line">INFO  Setting up Git deployment...</div><div class="line">Initialized empty Git repository in /Users/huangaengoln/Documents/hexo-blog/.deploy_git/.git/</div><div class="line">[master (root-commit) 4aa265c] First commit</div><div class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</div><div class="line"> create mode 100644 placeholder</div><div class="line">INFO  Clearing .deploy_git folder...</div><div class="line">INFO  Copying files from public folder...</div><div class="line">[master 8bafa3a] Site updated at 2017-04-23 02:10:01</div><div class="line"> 31 files changed, 6454 insertions(+)</div><div class="line"> create mode 100644 2017/04/22/hello-world/index.html</div><div class="line"> create mode 100644 2017/04/23/1How-to-change-App-theme-color/index.html</div><div class="line"> create mode 100644 archives/2017/04/index.html</div><div class="line"> create mode 100644 archives/2017/index.html</div><div class="line"> create mode 100644 archives/index.html</div><div class="line"> create mode 100644 css/fonts/FontAwesome.otf</div><div class="line"> create mode 100644 css/fonts/fontawesome-webfont.eot</div><div class="line"> create mode 100644 css/fonts/fontawesome-webfont.svg</div><div class="line"> create mode 100644 css/fonts/fontawesome-webfont.ttf</div><div class="line"> create mode 100644 css/fonts/fontawesome-webfont.woff</div><div class="line"> create mode 100644 css/images/banner.jpg</div><div class="line"> create mode 100644 css/style.css</div><div class="line"> create mode 100644 fancybox/blank.gif</div><div class="line"> create mode 100644 fancybox/fancybox_loading.gif</div><div class="line"> create mode 100644 fancybox/fancybox_loading@2x.gif</div><div class="line"> create mode 100644 fancybox/fancybox_overlay.png</div><div class="line"> create mode 100644 fancybox/fancybox_sprite.png</div><div class="line"> create mode 100644 fancybox/fancybox_sprite@2x.png</div><div class="line"> create mode 100644 fancybox/helpers/fancybox_buttons.png</div><div class="line"> create mode 100644 fancybox/helpers/jquery.fancybox-buttons.css</div><div class="line"> create mode 100644 fancybox/helpers/jquery.fancybox-buttons.js</div><div class="line"> create mode 100644 fancybox/helpers/jquery.fancybox-media.js</div><div class="line"> create mode 100644 fancybox/helpers/jquery.fancybox-thumbs.css</div><div class="line"> create mode 100644 fancybox/helpers/jquery.fancybox-thumbs.js</div><div class="line"> create mode 100644 fancybox/jquery.fancybox.css</div><div class="line"> create mode 100644 fancybox/jquery.fancybox.js</div><div class="line"> create mode 100644 fancybox/jquery.fancybox.pack.js</div><div class="line"> create mode 100644 index.html</div><div class="line"> create mode 100644 js/script.js</div><div class="line"> delete mode 100644 placeholder</div><div class="line"> create mode 100644 tags/thinkive/index.html</div><div class="line">To github.com:univer2012/univer2012.github.io.git</div><div class="line"> * [new branch]      HEAD -&gt; master</div><div class="line">Branch master set up to track remote branch master from git@github.com:univer2012/univer2012.github.io.git.</div><div class="line">INFO  Deploy done: git</div><div class="line">huangsengolndeMacBook-Pro:hexo-blog huangaengoln$</div></pre></td></tr></table></figure>
<p>发布成功后，访问<code>https://univer2012.github.io/</code>看下成果</p>
<p>来自：<a href="http://blog.csdn.net/jzooo/article/details/46781805" target="_blank" rel="external">零基础免费搭建个人博客-hexo+github</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://univer2012.github.io/2017/04/23/5how-to-issue-blog/" data-id="cj1tn2tgc0003h7fc3sgf3vos" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-4UITableViewHeaderFooterView-section-header-reuse-mechanism" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/23/4UITableViewHeaderFooterView-section-header-reuse-mechanism/" class="article-date">
  <time datetime="2017-04-22T19:04:48.000Z" itemprop="datePublished">2017-04-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/23/4UITableViewHeaderFooterView-section-header-reuse-mechanism/">UITableViewHeaderFooterView分组头部的重用机制ism</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我们都知道对<code>UITableViewCell</code>的重用，但是却很少人知道，对<code>UITableView</code>的header和footer，也是可以重用的。下面就来看看<code>UITableView</code>的header和footer的重用例子：</p>
<ul>
<li>首先声明一个全局静态变量：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">static NSString *headerIdentifier = @&quot;tableViewHeaderIdentifier&quot;;</div></pre></td></tr></table></figure>
<ul>
<li>然后在<code>viewDidLoad</code>里面注册<code>UITableViewHeaderFooterView</code>或者其子类：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:cellIdentifier];</div><div class="line">    [self.tableView registerClass:[UITableViewHeaderFooterView class] forHeaderFooterViewReuseIdentifier:headerIdentifier];</div></pre></td></tr></table></figure>
<ul>
<li>接下来就在<code>UITableViewDelegate</code>的方法<code>-tableView:viewForHeaderInSection:</code>或者<code>-tableView:viewForFooterInSection:</code>里面用identifer来或者可重用的header或者footer：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section &#123;</div><div class="line">    UITableViewHeaderFooterView *headerView = [tableView dequeueReusableHeaderFooterViewWithIdentifier:headerIdentifier];</div><div class="line">    headerView.textLabel.text = self.yearArray[section];</div><div class="line">    headerView.contentView.backgroundColor = [UIColor colorWithRed:1 green:0 blue:0 alpha:0.3];</div><div class="line">    headerView.detailTextLabel.text = @&quot;detailTextLabel&quot;;</div><div class="line">    return headerView;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面的例子用的是类<code>UITableViewHeaderFooterView</code>本身，我们可以通过继承<code>UITableViewHeaderFooterView</code>来达到自定义<code>UITableView</code>的header和footer的目的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://univer2012.github.io/2017/04/23/4UITableViewHeaderFooterView-section-header-reuse-mechanism/" data-id="cj1tn2ti4000ah7fcepm367t2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-3optimize-HuaAn-iOS-installation-package-size" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/" class="article-date">
  <time datetime="2017-04-22T19:00:12.000Z" itemprop="datePublished">2017-04-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/">华安iOS安装包大小的优化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>####1、手动整理</p>
<p>#####(1) 手动整理图片资源<br>之前对图片的管理很混乱，不仅每个控制器的文件夹的统计目录都有images文件夹，每个子模块的控制器同级目录下也有iamges文件夹。同时由于管理理念的变迁，以前的<code>/TKApp/images</code>和<code>/TKApp/resource/images</code>目录下还存放着图片。右键点击<code>show in Finder</code>查看，还可以看到有些图片没有引入工程但是在目录下还存在着。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic1.png" alt="工程目录与真实目录下的文件1"><br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic2.png" alt="工程目录与真实目录下的文件2"><br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic3.png" alt="工程目录与真实目录下的文件3"></p>
<p>#####(2)把没有使用的代码文件删除</p>
<p>有一部分代码是之前的模块文件，但是现在没有在用这些代码了。所以也要把他们找出来并删除掉。特别注意的是，有些模块可能没有引入到工程，所以真实目录下也要检查。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic4.png" alt="没有用的子模块"><br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic5.png" alt="没有用的控制器类"><br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic6.png" alt="没有用的文件类"></p>
<p>####2、工具分析来整理图片资源</p>
<p>对于不能立即找到在工程中没有用的图片，我们可以用【LSUnusedResources】开源软件(下载地址：<a href="https://raw.githubusercontent.com/tinymind/LSUnusedResources/master/Release/LSUnusedResources.app.zip" target="_blank" rel="external">传送门</a>)来快速找出没被使用的资源文件。<br>使用方法如下：</p>
<ul>
<li>输入<code>Xcode project path</code>;</li>
<li>在<code>Code Suffix</code>把工程用存在的文件格式打上勾，同时取消<code>Ignore</code>右旁的勾；</li>
<li>点击右下方的<code>Search</code>开始查找；</li>
<li>查找完成后，选中要删除的资源后，点击右下方的<code>Delete</code>可以删除对应目录下的该资源文件；</li>
</ul>
<p>查找到的结果截图如下：<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic7.png" alt="LSUnusedResources查找结果"><br>由于工程是由各负责人开发完成的，虽然代码在这里，可以每张全局搜索来查看有没有使用，但是未免工作量太大。同时也不是真正清楚这些找到的图片有没有间接使用到。还有就是源头修改才是正道，不然下次工程覆盖后，删除的图片就又回来了。</p>
<p>所以找到这些没有使用的资源文件后，把各个模块的资源图片整理出来，然后考虑告知经理，让各个模块的负责人去检查各自的代码，把没有使用的图片删除之，有间接使用的图片，说明一下。</p>
<p>下图是删除了行情、ygt、trade、open的无用图片后的安装包对比，减小了0.4MB:<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic17_delete_hq_trade_ygt_open.png" alt=""></p>
<p>具体整理的文件可以看《华安没有用到的图片统计》</p>
<p>####3、对图片进行无损压缩</p>
<p>清理完没有使用的图片资源后，可以进一步地，对工程中使用到的图片进行无损压缩，减小图片的总大小。</p>
<p>3.1、使用【ImageOptim】</p>
<p>【ImageOptim】的下载地址为：<a href="https://imageoptim.com/ImageOptim.tbz2" target="_blank" rel="external">传送门</a></p>
<p>具体使用，就是直接把要压缩的图片拖到【ImageOptim】窗口里面，ImageOptim机会对图片进行压缩。截图如下：<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic8.png" alt=""><br>对拖进去先后坐下对比，图片确实变小了：<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic9.png" alt="压缩前后对比(实例)"></p>
<p>3.2、使用【tinyPNG】网站在线无损压缩(或者使用tinyPNG的开元软件【TinyPNG4Mac】进行无损压缩)</p>
<p>【tinyPNG】网站的地址为(<a href="https://tinypng.com/" target="_blank" rel="external">传送门</a>)</p>
<p>【TinyPNG4Mac】的下载地址在:<a href="https://github.com/kyleduo/TinyPNG4Mac" target="_blank" rel="external">传送门</a>。这个</p>
<p>鉴于【LaunchImage】的图片用【ImageOptim】无损压缩不理想，于是把这组图片都拖到【TinyPNG】网址去压缩，压缩效果如下：<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic26_tinyPNG_optimize.png" alt=""></p>
<p>打包后的前后对比如下：<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic25_tinyPNG_compare.png" alt=""></p>
<p>####4、使用.xcassets来管理图片以减小安装包大小<br>为了说明使用<code>.xcassets</code>来管理可以有效减小安装包大小，我备份了一份【华安徽赢】的工程，主工程保持不变，备份工程把所有的<code>.png</code>图片都放在<code>Images.xcassets</code>下<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic10_all_in_xcassets.png" alt="all_in_xcassets"></p>
<p><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic11_not_all_in_xcassets.png" alt="not_all_in_xcassets"></p>
<p><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic12_xcassets_compare.png" alt="compare"></p>
<p>从上一张图可以看出，苹果确实会为放在<code>.xcassets</code>里面的图片进行压缩，安装包减小了0.2MB。</p>
<p>####5、编译器的优化<br>1、<code>Build Settngs</code>中的配置项</p>
<p><code>Build Settings</code>-&gt;<code>Optimization Level</code>有几个编译优化选项，release版应该选择Fastest, Smalllest，这个选项会开启那些不增加代码大小的全部优化，并让可执行文件尽可能小。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic13_Optimization_Level.png" alt=""><br>项目已经设置了这个选项。</p>
<p>2、去除符号信息</p>
<p><code>Build Settings</code>中的<code>Strip Linked Product</code>、<code>Strip Debug Symbols During Copy</code> 和 <code>Symbols Hidden by Default</code>在release版本应该设为<code>YES</code>，可以去除不必要的调试符号。<code>Symbols Hidden by Default</code>会把所有符号都定义成”private extern”。这些选项目前都是XCode里release的默认选项，但旧版XCode生成的项目可能不是，可以检查一下。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic14_symbols.png" alt="symbols"><br>项目之前已经设置<code>Strip Linked Product</code>、<code>Strip Debug Symbols During Copy</code>为<code>Yes</code>了。设置<code>Symbols Hidden by Default</code>为<code>Yes</code>解压ipa包后可以减小0.1MB：<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/Users/huangaengoln/Documents/personal-document/pictures/3optimize_HuaAn_iOS_installation_package_size/pic18_Symbols Hidden by Default.png" alt=""></p>
<p>3、配置App Thinning为包瘦身</p>
<p>App Thinning是伴随iOS9一起出现的，因此该功能也仅对iOS9以上设备生效。App Thinning主要包含以下3个方面：App Slicing(应用程序的划分)、On Demand Resources(按需加载资源) 和 Bitcode。</p>
<p>3.1、App Slicing</p>
<p>根据苹果官方文献的描述「Slicing 是为应用捆绑包创建、分发不同变体以适应不同目标设备的过程。一个变体只包含针对某个目标设备的可执行架构与资源。」 换句话说，App Slicing仅向设备传送与之相关的资源（取决于屏幕分辨率，架构等等）。事实上，App Slicing 负责处理 App Thinning 的主要流程。</p>
<p>当你准备好提交 app 时，通常会（但必须使用 Xcode7，因为它包含支持 App Thinning 的 iOS9 SDK）向 iTtunes Connect 上传 .IPA 或 .App 文件。然后，应用商店分割该应用，创建特定的变体以适应性能不同设备。</p>
<p>3.2、On Demand Resources</p>
<p>按需加载资源是在 app 第一次安装后可下载的文件。举例说明，当玩家解锁游戏的特定关卡后可以下载新关卡（和这个关卡相关的特定内容）。此外，玩家已经通过的关卡可以被移除以便节约设备上的存储空间。</p>
<p>开启按需加载资源功能涉及改变 Xcode 中的设置：在<code>Build Settings</code>下，将<code>Enable On Demand Resources</code>设置为<code>Yes</code>。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic15_On_Demand_Resources.png" alt="On_Demand_Resources的设置"></p>
<p>3.3、Bitcode</p>
<p>本质上Bitcode也是苹果在用户下载前优化app的新方式。Bitcode 使得 app 无论在何设备上都能快速高效地运行。Bitcode 使用最新的编译器自动编译app并且针对特定架构进行优化。（例如，针对 iPhone 6s和 iPad Air 2等 64 位处理器的 arm64）</p>
<p>Bitcode 不会下载应用针对不同架构的优化，而仅下载与特定设备相关的优化，使得下载量更小，同时与前文所述的 App Thinning 技术紧密合作。</p>
<p>Bitcode 是 iOS 上较新的功能，对于新的项目需要手动开启。在<code>Build Settings</code>下，将<code>Enable Bitcode</code>设置为<code>Yes</code>来完成。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic16_bitcode.png" alt="bitcode"></p>
<p>设置后打包，报错，提示IM的<code>XMPPRoomHybridStorage</code>类还支持bitcode：<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic19_bitcode.png" alt=""></p>
<p>4、设置<code>Make Strings Read-Only</code>为<code>Yes</code></p>
<p>工程已设置。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic20_make_Strings_Read_Only.png" alt=""></p>
<p>5、去掉异常支持，<code>Enable C++ Exceptions</code> 和 <code>Enable Objective-C Exceptions</code>设为NO，并且<code>Other C Flags</code>添加<code>-fno-exceptions</code>。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic21_Enable_C++:OC_Exceptions.png" alt=""></p>
<p><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic22_other_linker_flags.png" alt=""><br><code>Archive</code>后报错，原因是关闭<code>Enable Objective-C Exceptions</code>后<code>@try{//...} @catch() {//...}</code>不能使用了。<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic23_Enable_OC_Exception_try.png" alt=""><br><code>Enable Objective-C Exceptions</code>设置回去后，打包，发现包大小没有变化：<br><img src="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/pic24_compare_Exceptions_NO.png" alt=""></p>
<p>####6、代码优化</p>
<p>参考资料：<a href="http://www.jianshu.com/p/c74e532d2f36" target="_blank" rel="external">iOS9 App Thinning(应用瘦身)功能介绍</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://univer2012.github.io/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/" data-id="cj1tn2thx0007h7fc2w64bqq2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thinkive/">thinkive</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2install-or-update-gem-in-macOS-Sierra-in-edition10-12-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/23/2install-or-update-gem-in-macOS-Sierra-in-edition10-12-2/" class="article-date">
  <time datetime="2017-04-22T18:57:34.000Z" itemprop="datePublished">2017-04-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/23/2install-or-update-gem-in-macOS-Sierra-in-edition10-12-2/">在macOS Sierra(版本 10.12.2)安装/更新gem</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天在学习<a href="https://leancloud.cn/" target="_blank" rel="external">LeanCloud</a>时，需要获取SDK，官方推荐的方式是通过包依赖管理工具来下载最新版本。然后第一步是【包依赖管理工具安装】，于是就点进了<a href="http://code4app.com/article/cocoapods-install-usage" target="_blank" rel="external">CocoaPods安装和使用教程</a>，在【如何下载和安装CocoaPods？】来安装和更新CocoaPods。但是发现执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gem sources -a http://ruby.taobao.org/</div></pre></td></tr></table></figure>
<p>这句时，终端一直没有出现<code>huangsengolndeMacBook-Pro:Desktop huangaengoln$</code><br><strong>说明这个源也像<code>cocoapods.org</code>不能访问了</strong>。于是就百度，发现有个<a href="http://blog.163.com/chenchen..1986/blog/static/76063146201552911115400/" target="_blank" rel="external">博客网站</a>里面说:</p>
<blockquote>
<p>按照下面的顺序在终端中敲入依次敲入命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; $ gem sources --remove https://rubygems.org/</div><div class="line">&gt;</div></pre></td></tr></table></figure>
<p>//等有反应之后再敲入以下命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; $ gem sources -a http://ruby.taobao.org/</div><div class="line">&gt; //或者</div><div class="line">&gt; $ gem sources -a https://ruby.taobao.org/</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>于是就尝试键入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gem sources -a https://ruby.taobao.org/</div></pre></td></tr></table></figure>
<p>效果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$ gem sources -a https://ruby.taobao.org/</div><div class="line">https://ruby.taobao.org/ added to sources</div><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$</div></pre></td></tr></table></figure>
<p>说明这个源才是正确的。</p>
<p>接下来更新gem：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$ gem update --system</div><div class="line">Updating rubygems-update</div><div class="line">Fetching: rubygems-update-2.6.7.gem (100%)</div><div class="line">ERROR:  While executing gem ... (Gem::FilePermissionError)</div><div class="line">    You don&apos;t have write permissions for the /Library/Ruby/Gems/2.0.0 directory.</div><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$ sudo gem update --system</div><div class="line">Password:</div><div class="line">Updating rubygems-update</div><div class="line">Fetching: rubygems-update-2.6.7.gem (100%)</div><div class="line">ERROR:  While executing gem ... (Errno::EPERM)</div><div class="line">    Operation not permitted - /usr/bin/update_rubygems</div><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$</div></pre></td></tr></table></figure>
<p><code>- /usr/bin/update_rubygems</code>操作不允许。百度下，在<a href="https://segmentfault.com/q/1010000002926243" target="_blank" rel="external">SegmentFault的一篇问答</a>中看到这么一个回答：</p>
<blockquote>
<p>这个问题在stackoverflow上面有过讨论：</p>
<p><a href="http://stackoverflow.com/questions/32810808/can-not-perform-pod-install-under-el-capitan-15a279b" target="_blank" rel="external">Can not perform <code>pod install</code> under el capitan (15A279b)</a></p>
<p>被采纳的答案为：<code>sudo gem install -n /usr/local/bin cocoapods</code></p>
</blockquote>
<p>于是将信将疑地继续在终端键入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$ sudo gem install -n /usr/local/bin</div><div class="line">ERROR:  While executing gem ... (Gem::CommandLineError)</div><div class="line">    Please specify at least one gem name (e.g. gem build GEMNAME)</div><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$ sudo gem install -n /usr/local/bin cocoapods</div><div class="line">Successfully installed xcodeproj-1.4.4</div><div class="line">Fetching: ruby-macho-1.1.0.gem (100%)</div><div class="line">Successfully installed ruby-macho-1.1.0</div><div class="line">Fetching: molinillo-0.5.7.gem (100%)</div><div class="line">Successfully installed molinillo-0.5.7</div><div class="line">Fetching: gh_inspector-1.0.3.gem (100%)</div><div class="line">Successfully installed gh_inspector-1.0.3</div><div class="line">Fetching: fourflusher-2.0.1.gem (100%)</div><div class="line">Successfully installed fourflusher-2.0.1</div><div class="line">Fetching: cocoapods-try-1.1.0.gem (100%)</div><div class="line">Successfully installed cocoapods-try-1.1.0</div><div class="line">Fetching: cocoapods-trunk-1.2.0.gem (100%)</div><div class="line">Successfully installed cocoapods-trunk-1.2.0</div><div class="line">Fetching: cocoapods-stats-1.0.0.gem (100%)</div><div class="line">Successfully installed cocoapods-stats-1.0.0</div><div class="line">Fetching: cocoapods-search-1.0.0.gem (100%)</div><div class="line">Successfully installed cocoapods-search-1.0.0</div><div class="line">Fetching: cocoapods-plugins-1.0.0.gem (100%)</div><div class="line">Successfully installed cocoapods-plugins-1.0.0</div><div class="line">Fetching: cocoapods-downloader-1.1.3.gem (100%)</div><div class="line">Successfully installed cocoapods-downloader-1.1.3</div><div class="line">Fetching: cocoapods-deintegrate-1.0.1.gem (100%)</div><div class="line">Successfully installed cocoapods-deintegrate-1.0.1</div><div class="line">Fetching: cocoapods-core-1.2.1.gem (100%)</div><div class="line">Successfully installed cocoapods-core-1.2.1</div><div class="line">Fetching: cocoapods-1.2.1.gem (100%)</div><div class="line">Successfully installed cocoapods-1.2.1</div><div class="line">Parsing documentation for xcodeproj-1.4.4</div><div class="line">Installing ri documentation for xcodeproj-1.4.4</div><div class="line">Parsing documentation for ruby-macho-1.1.0</div><div class="line">Installing ri documentation for ruby-macho-1.1.0</div><div class="line">Parsing documentation for molinillo-0.5.7</div><div class="line">Installing ri documentation for molinillo-0.5.7</div><div class="line">Parsing documentation for gh_inspector-1.0.3</div><div class="line">Installing ri documentation for gh_inspector-1.0.3</div><div class="line">Parsing documentation for fourflusher-2.0.1</div><div class="line">Installing ri documentation for fourflusher-2.0.1</div><div class="line">Parsing documentation for cocoapods-try-1.1.0</div><div class="line">Installing ri documentation for cocoapods-try-1.1.0</div><div class="line">Parsing documentation for cocoapods-trunk-1.2.0</div><div class="line">Installing ri documentation for cocoapods-trunk-1.2.0</div><div class="line">Parsing documentation for cocoapods-stats-1.0.0</div><div class="line">Installing ri documentation for cocoapods-stats-1.0.0</div><div class="line">Parsing documentation for cocoapods-search-1.0.0</div><div class="line">Installing ri documentation for cocoapods-search-1.0.0</div><div class="line">Parsing documentation for cocoapods-plugins-1.0.0</div><div class="line">Installing ri documentation for cocoapods-plugins-1.0.0</div><div class="line">Parsing documentation for cocoapods-downloader-1.1.3</div><div class="line">Installing ri documentation for cocoapods-downloader-1.1.3</div><div class="line">Parsing documentation for cocoapods-deintegrate-1.0.1</div><div class="line">Installing ri documentation for cocoapods-deintegrate-1.0.1</div><div class="line">Parsing documentation for cocoapods-core-1.2.1</div><div class="line">Installing ri documentation for cocoapods-core-1.2.1</div><div class="line">Parsing documentation for cocoapods-1.2.1</div><div class="line">Installing ri documentation for cocoapods-1.2.1</div><div class="line">14 gems installed</div><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$</div></pre></td></tr></table></figure>
<p>终于到达了<code>xx gems installed</code>的提示了。</p>
<p>接着安装cocoapods：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$ sudo gem install cocoapods</div><div class="line">Password:</div><div class="line">ERROR:  While executing gem ... (Errno::EPERM)</div><div class="line">    Operation not permitted - /usr/bin/pod</div><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$</div></pre></td></tr></table></figure>
<p>操作不允许<code>- /usr/bin/pod</code>。继续复制<code>Operation not permitted - /usr/bin/pod</code>百度。在<a href="http://blog.csdn.net/leaf8742/article/details/50466619" target="_blank" rel="external">这篇博客</a>找到了解决方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$ sudo gem install -n /usr/local/bin cocoapods</div><div class="line">Successfully installed cocoapods-1.2.1</div><div class="line">Parsing documentation for cocoapods-1.2.1</div><div class="line">1 gem installed</div><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$</div></pre></td></tr></table></figure>
<p>总算安装完成了。</p>
<p>最后测试下第三方库的管理。</p>
<p>查询<code>Parse</code>是否可以用cocoaPods管理：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:Desktop huangaengoln$ pod search Parse</div><div class="line"></div><div class="line">-&gt; Parse (1.14.2)</div><div class="line">   A library that gives you access to the powerful Parse cloud platform from your</div><div class="line">   iOS/OS X/watchOS/tvOS app.</div><div class="line">   pod &apos;Parse&apos;, &apos;~&gt; 1.14.2&apos;</div><div class="line">   - Homepage: https://www.parse.com/</div><div class="line">   - Source:   https://github.com/ParsePlatform/Parse-SDK-iOS-OSX.git</div><div class="line">   - Versions: 1.14.2, 1.14.1, 1.14.0, 1.13.0, 1.12.0, 1.11.0, 1.10.0, 1.9.1, 1.9.0,</div><div class="line">   1.8.5, 1.8.4, 1.8.3, 1.8.2, 1.8.1, 1.8.0, 1.7.5.3, 1.7.5.2, 1.7.5.1, 1.7.5, 1.7.4,</div><div class="line">   1.7.3, 1.7.2.2, 1.7.2.1, 1.7.2, 1.7.1, 1.7.0, 1.6.5, 1.6.4, 1.6.3, 1.6.2, 1.6.1,</div><div class="line">   1.6.0, 1.5.0, 1.4.2, 1.4.1, 1.4.0, 1.3.0.1, 1.3.0, 1.2.21, 1.2.20, 1.2.19, 1.2.18,</div><div class="line">   1.2.17, 1.2.16, 1.2.15, 1.2.13, 1.2.12, 1.2.11, 1.2.10, 1.2.9, 1.2.8, 1.2.7, 1.2.6,</div><div class="line">   1.2.5, 1.2.4, 1.2.3, 1.2.2, 1.2.1, 1.2.0, 1.1.33, 1.1.32, 1.1.31, 1.1.30, 1.1.29,</div><div class="line">   1.1.27, 1.1.25, 1.1.24, 1.1.23, 1.1.10, 1.0.39, 1.0.36 [master repo]</div><div class="line"></div><div class="line">-&gt; Parse+NSCoding (0.1.4)</div><div class="line">   iOS library for serializing Parse objects</div><div class="line">   pod &apos;Parse+NSCoding&apos;, &apos;~&gt; 0.1.4&apos;</div><div class="line">   - Homepage: https://github.com/martinrybak/Parse-NSCoding</div><div class="line">   - Source:   https://github.com/martinrybak/Parse-NSCoding.git</div><div class="line">   - Versions: 0.1.4, 0.1.3, 0.1.2, 0.1.1, 0.1.0, 0.0.2, 0.0.1 [master repo]</div><div class="line"></div><div class="line">-&gt; Parse+PromiseKit (0.9.2)</div><div class="line">   A PromiseKit category for the Parse SDK.</div><div class="line">   pod &apos;Parse+PromiseKit&apos;, &apos;~&gt; 0.9.2&apos;</div><div class="line">//... ...</div><div class="line">:</div></pre></td></tr></table></figure>
<p>新建<code>podfile</code>,并加入<code>Parse</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim podfile</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//podfile</div><div class="line">pod &apos;Parse&apos;</div></pre></td></tr></table></figure>
<p>下载<code>Parse</code>库：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:MyParse huangaengoln$ pod install</div><div class="line">Analyzing dependencies</div><div class="line">[!] The dependency `Parse (~&gt; 1.14.2)` is not used in any concrete target.</div><div class="line"></div><div class="line">[!] Smart quotes were detected and ignored in your Podfile. To avoid issues in the future, you should not use TextEdit for editing it. If you are not using TextEdit, you should turn off smart quotes in your editor of choice.</div><div class="line">huangsengolndeMacBook-Pro:MyParse huangaengoln$ sudo pod install</div><div class="line">Password:</div><div class="line">/Library/Ruby/Gems/2.0.0/gems/claide-1.0.1/lib/claide/command.rb:439:in `help!&apos;: [!] You cannot run CocoaPods as root. (CLAide::Help)</div><div class="line"></div><div class="line">Usage:</div><div class="line"></div><div class="line">    $ pod COMMAND</div><div class="line"></div><div class="line">      CocoaPods, the Cocoa library package manager.</div><div class="line"></div><div class="line">Commands:</div><div class="line"></div><div class="line">    + cache      Manipulate the CocoaPods cache</div><div class="line">    + env        Display pod environment</div><div class="line">    + init       Generate a Podfile for the current directory</div><div class="line">    + install    Install project dependencies according to versions from a</div><div class="line">                 Podfile.lock</div><div class="line">    + ipc        Inter-process communication</div><div class="line">    + lib        Develop pods</div><div class="line">    + list       List pods</div><div class="line">    + outdated   Show outdated project dependencies</div><div class="line">    + repo       Manage spec-repositories</div><div class="line">    + setup      Setup the CocoaPods environment</div><div class="line">    + spec       Manage pod specs</div><div class="line">    + update     Update outdated project dependencies and create new Podfile.lock</div><div class="line"></div><div class="line">Options:</div><div class="line"></div><div class="line">    --silent     Show nothing</div><div class="line">    --version    Show the version of the tool</div><div class="line">    --verbose    Show more debugging information</div><div class="line">    --no-ansi    Show output without ANSI codes</div><div class="line">    --help       Show help banner of specified command</div><div class="line">	from /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.2.1/lib/cocoapods/command.rb:47:in `run&apos;</div><div class="line">	from /Library/Ruby/Gems/2.0.0/gems/cocoapods-1.2.1/bin/pod:55:in `&lt;top (required)&gt;&apos;</div><div class="line">	from /usr/local/bin/pod:23:in `load&apos;</div><div class="line">	from /usr/local/bin/pod:23:in `&lt;main&gt;&apos;</div></pre></td></tr></table></figure>
<p>发现红色的文字提示<code>[!] The dependency</code>Parse (~&gt; 1.14.2)<code>is not used in any concrete target.</code>。复制该句百度，找到<a href="http://blog.sina.com.cn/s/blog_6ff6523d0102x86c.html" target="_blank" rel="external">一篇博客</a>的解决方法：</p>
<blockquote>
<p>我的Podfile的内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; platform:ios,&apos;7.0&apos;</div><div class="line">&gt; pod &apos;Masonry&apos;, &apos;~&gt; 1.0.1&apos;</div><div class="line">&gt; pod &apos;MJRefresh&apos;, &apos;~&gt; 3.1.12&apos;</div><div class="line">&gt;</div></pre></td></tr></table></figure>
<p>结果执行：<code>pod install</code> 后出现错误The dependency `` is not used in any concrete target</p>
<p>3）修复这个错误只需要修改成如下即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;platform:ios,&apos;7.0&apos;</div><div class="line">&gt;target &quot;KYVedioPlayer&quot; do</div><div class="line">&gt;pod &apos;Masonry&apos;, &apos;~&gt; 1.0.1&apos;</div><div class="line">&gt;pod &apos;MJRefresh&apos;, &apos;~&gt; 3.1.12&apos;</div><div class="line">&gt;end</div><div class="line">&gt;</div></pre></td></tr></table></figure>
<p>要明确指出所用第三方库的target</p>
<p>这样再运行 <code>pod install --verbose --no-repo-update</code>，就会成功了。</p>
</blockquote>
<p>然后修改podfile文件:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//podfile</div><div class="line">target &quot;MyParse&quot; do</div><div class="line">pod &apos;Parse’</div><div class="line">end</div></pre></td></tr></table></figure>
<p>再运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">huangsengolndeMacBook-Pro:MyParse huangaengoln$ pod install</div><div class="line">Analyzing dependencies</div><div class="line">Downloading dependencies</div><div class="line">Installing Bolts (1.8.4)</div><div class="line">Installing Parse (1.14.2)</div><div class="line">Generating Pods project</div><div class="line">Integrating client project</div><div class="line"></div><div class="line">[!] Please close any current Xcode sessions and use `MyParse.xcworkspace` for this project from now on.</div><div class="line">Sending stats</div><div class="line">Pod installation complete! There is 1 dependency from the Podfile and 2 total pods installed.</div><div class="line"></div><div class="line">[!] Smart quotes were detected and ignored in your Podfile. To avoid issues in the future, you should not use TextEdit for editing it. If you are not using TextEdit, you should turn off smart quotes in your editor of choice.</div><div class="line"></div><div class="line">[!] Automatically assigning platform ios with version 10.2 on target MyParse because no platform was specified. Please specify a platform for this target in your Podfile. See `https://guides.cocoapods.org/syntax/podfile.html#platform`.</div><div class="line">huangsengolndeMacBook-Pro:MyParse huangaengoln$</div></pre></td></tr></table></figure>
<p>再看看目录，果真下载好了第三方库。</p>
<hr>
<p>来自：<a href="http://blog.163.com/chenchen..1986/blog/static/76063146201552911115400/" target="_blank" rel="external">Mac安装gem、cocoapods（转）</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://univer2012.github.io/2017/04/23/2install-or-update-gem-in-macOS-Sierra-in-edition10-12-2/" data-id="cj1tn2tg40001h7fc7v4e12p1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-1How-to-change-App-theme-color" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/23/1How-to-change-App-theme-color/" class="article-date">
  <time datetime="2017-04-22T18:38:08.000Z" itemprop="datePublished">2017-04-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/23/1How-to-change-App-theme-color/">如何切换App主体颜色</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>摘要:</p>
<p>####一、业务需求<br>年后回来，公司的一个项目要在系统设置添加“切换主题”(后来改为在首页导航栏右侧)的功能，就是点进去后可以选择App的主题颜色，并且立即生效。对这个需求，公司的其他项目都还没有实现过。</p>
<p>####二、准备和寻求帮助<br>在接手第一个项目之前，看代码时就看到过交易控制器里面有一段有关切换主题颜色的代码：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">-(<span class="built_in">NSArray</span> *)listNotificationInter &#123;</div><div class="line">    <span class="built_in">NSMutableArray</span> *list = [<span class="built_in">NSMutableArray</span> arrayWithArray:[<span class="keyword">super</span> listNotificationInter]];</div><div class="line">    [list addObject:NOTE_THEME_CHANGED];</div><div class="line">    <span class="keyword">return</span> list;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)handleNotification:(<span class="built_in">NSNotification</span> *)notification&#123;</div><div class="line">    <span class="built_in">NSString</span> *name = notification.name;</div><div class="line">    <span class="keyword">if</span> ([name isEqualToString:NOTE_THEME_CHANGED]) &#123;</div><div class="line">        <span class="built_in">NSString</span> *theme = notification.object;</div><div class="line">        <span class="built_in">NSInteger</span> skin = <span class="number">0</span> ;</div><div class="line">        <span class="keyword">if</span> ([theme isEqualToString:<span class="string">@"theme1"</span>]||[theme isEqualToString:<span class="string">@"theme3"</span>]) &#123;</div><div class="line">            skin = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        [_tradeH5Service iosCallJsToChangeSkin:<span class="string">@"trade"</span> theme:skin callBackFunc:^(ResultVo *resultVo) &#123;</div><div class="line">        &#125;];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        [<span class="keyword">super</span> handleNotification:notification];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>再加上，公司基本上所有项目都是标准版拿过来进行定制化改造的，然后标准版都有<code>/TKApp/resource/theme/</code>这个目录，这个目录下有<code>common</code>、<code>theme1</code>、<code>theme2</code>、<code>theme3</code>等文件夹，文件夹下面就是2、3个.css文件，里面都是颜色值和图片名称。所以我猜测，公司iOS框架是支持换肤的！</p>
<p>####三、执行与效果<br>很显然，上面的代码是调用接口来通知trade模块去改变主题的。</p>
<p>但是框架是如何改变原生控件的颜色的呢？</p>
<ul>
<li>【1】</li>
</ul>
<p>首先我们注意到，框架的<code>Configuration_xxx.xml</code>配置文件设置了一个默认的主题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;system&gt;</div><div class="line">    &lt;catalog name=&quot;system&quot; description=&quot;系统配置&quot;&gt;</div><div class="line">        //... ...</div><div class="line">        &lt;item name=&quot;theme&quot; value=&quot;theme1&quot; description=&quot;默认主题名称&quot; /&gt;</div><div class="line">        //... ...</div><div class="line">    &lt;/catalog&gt;</div><div class="line">    </div><div class="line">    //... ...</div><div class="line">    </div><div class="line">    &lt;catalog name=&quot;theme&quot; description=&quot;主题配置&quot;&gt;</div><div class="line">        &lt;item name=&quot;theme1&quot; value=&quot;blueTheme.css|blueHq.css|hqRedGreen.css|blueTrade.css&quot; description=&quot;主题1样式文件地址&quot; /&gt;</div><div class="line">        &lt;item name=&quot;theme4&quot; value=&quot;redTheme.css|bightHq.css|hqGreenRed.css&quot; description=&quot;主题4样式文件地址&quot; /&gt;</div><div class="line">        &lt;item name=&quot;theme3&quot; value=&quot;blueTheme.css|blueHq.css|hqGreenRed.css&quot; description=&quot;主题3样式文件地址&quot; /&gt;</div><div class="line">        &lt;item name=&quot;theme5&quot; value=&quot;pinkTheme.css|pinkHq.css|hqRedGreen.css&quot; description=&quot;主题5样式文件地址&quot; /&gt;</div><div class="line">    &lt;/catalog&gt;</div><div class="line">    </div><div class="line">    //... ...</div><div class="line">&lt;/system&gt;</div></pre></td></tr></table></figure>
<p>其中<code>theme1</code>对应的颜色值文件分别是<code>blueTheme.css</code>、<code>blueHq.css</code>、<br><code>hqRedGreen.css</code>、<code>blueTrade.css</code>。</p>
<ul>
<li>【2】</li>
</ul>
<p>接下来我打算找一个在<code>blueTheme.css</code>文件中有用到的颜色值并跟实际控件对比看看。比如‘资讯详情分享按钮’：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/*  blueTheme.css  */</div><div class="line">/*资讯详情分享按钮*/</div><div class="line">.informationShareButton &#123;</div><div class="line">    /*文字颜色*/</div><div class="line">    color:white;</div><div class="line">    /*背景色 天蓝*/</div><div class="line">    background-color: #E15A53;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>保持上面的配置，运行App，资讯详情页面的截图与对应的代码如下：<br><img src="/2017/04/23/1How-to-change-App-theme-color/pic0.png" alt="资讯详情页面"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#import &quot;TKInfoShareButton.h&quot;</div><div class="line"></div><div class="line">@implementation TKInfoShareButton</div><div class="line"></div><div class="line">- (instancetype)initWithFrame:(CGRect)frame</div><div class="line">&#123;</div><div class="line">    self = [super initWithFrame:frame];</div><div class="line">    if (self) &#123;</div><div class="line">        [self addCssClass:@&quot;.informationShareButton&quot;];</div><div class="line">        [self setUpInfoShareButton];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line">// to do ... ...</div></pre></td></tr></table></figure>
<p>拿测色计取色结果对比下<br><img src="/2017/04/23/1How-to-change-App-theme-color/pic1.png" alt=""></p>
<p>验证正确！说明配置才.css文件中的颜色值，都是通过<code>addCssClass:</code>方法来改变对象的属性颜色的。查看该方法的类：<br><img src="/2017/04/23/1How-to-change-App-theme-color/pic3.png" alt=""><br>可知框架是扩展了<code>UIView</code>，对<code>UIView</code>的子类实例进行颜色设置的。</p>
<ul>
<li>3</li>
</ul>
<p>最后，关键的一步是，我们怎么来切换主题，并且能让设置立即生效呢？</p>
<p>记得系统设置中的【行情显示设置】里面的<code>红涨绿跌</code>和<code>绿涨红跌</code>中的代码是这样写的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * @Author 刘鹏民, 15-04-21 17:04:32</div><div class="line"> * @brief</div><div class="line"> * @param tableView</div><div class="line"> * @param indexPath</div><div class="line"> */</div><div class="line">- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];</div><div class="line">    if(cell == _defaultSelected )&#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    [cell setAccessoryType:UITableViewCellAccessoryCheckmark];</div><div class="line">    [_defaultSelected setAccessoryType:UITableViewCellAccessoryNone];</div><div class="line">    _defaultSelected = cell;</div><div class="line">    </div><div class="line">    NSString *theme = [TKThemeManager shareInstance].theme;</div><div class="line">    </div><div class="line">    if (indexPath.row ==  0) &#123;</div><div class="line">        if ([theme isEqualToString:@&quot;theme3&quot;]) &#123;</div><div class="line">            [TKThemeManager shareInstance].theme = @&quot;theme1&quot;;</div><div class="line">        &#125; else if([theme isEqualToString:@&quot;theme4&quot;])&#123;</div><div class="line">            [TKThemeManager shareInstance].theme = @&quot;theme2&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">        if ([theme isEqualToString:@&quot;theme1&quot;]) &#123;</div><div class="line">            [TKThemeManager shareInstance].theme = @&quot;theme3&quot;;</div><div class="line">        &#125; else if([theme isEqualToString:@&quot;theme2&quot;])&#123;</div><div class="line">            [TKThemeManager shareInstance].theme = @&quot;theme4&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>就是说，我们可以用<code>[TKThemeManager shareInstance].theme = ...</code>来设置文字的颜色，而且立即生效！That’s amazing!</p>
<p>同理我们也可以联想到对<code>UIView</code>类及其子类实例的背景颜色设置也同样是管用的。</p>
<p>摸清楚情况后，就开始着手对原生页面，按照设计师给色设计图和颜色值一点一点地来调试和修改了，接下来的就是体力活了，此处省略。下面是最终的效果动图：<br><img src="/2017/04/23/1How-to-change-App-theme-color/xinda_change_theme_color.gif" alt=""></p>
<p>####四、注意事项与总结<br>对这个主题颜色，我们有几点要注意和理解的：</p>
<p>1、目录<code>/TKApp/resource/theme/</code>下的各个主题文件夹里面的文件，与框架的<code>Configuration_xxx.xml</code>配置文件下配置的主题，可能不是一一对应的。起决定性的是，配置文件下各个主题配置的<code>.css</code>文件，这个我们要注意。当然，我们应该尽可能把同一个主题下的文件放在对应的主题文件夹目录下。</p>
<p>2、<code>.css</code>文件里面，每个cssClass都不知道哪里有用到，也没有注释说明下这个会在哪里用到，让人看起来很费解。我觉得可以把同一个业务模块的cssClass配置放在一起，并做一定的隔离；每个名称上面写些必要的注释。</p>
<p>3、<code>.css</code>文件中也是支持图片配置的，比如上面动图中点击的“太阳”和“月亮”图片。配置和使用示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">/*----------配置----------*/</div><div class="line">//黑色主题 blackTheme.css</div><div class="line">/*首页右侧导航栏的换肤按钮图片*/</div><div class="line">.homerightNavbarSkinImage &#123;</div><div class="line">    -mobile-image: url(home_rightNavbar_sun.png);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//蓝色主题 blueTheme.css</div><div class="line">/*首页右侧导航栏的换肤按钮图片*/</div><div class="line">.homerightNavbarSkinImage&#123;</div><div class="line">    -mobile-image: url(home_rightNavbar_moon.png);</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*----------使用----------*/</div><div class="line">//右换肤按钮</div><div class="line">self.skinImageView = (&#123;</div><div class="line">    UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 18, 18)];</div><div class="line">    [imageView addCssClass:@&quot;.homerightNavbarSkinImage&quot;];</div><div class="line">    UITapGestureRecognizer *leftTagGesRecognizer = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(p_updateSkin)];</div><div class="line">    [imageView addGestureRecognizer:leftTagGesRecognizer];</div><div class="line">    imageView;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>4、添加切换主题功能时，要注意与设置中的<code>行情显示设置</code>配合着来。我的解决方案是，在<code>Configuration_xxx.xml</code>中配置4套主题。</p>
<p>5、或许项目中的颜色配置都可以使用这种方式来设置，这样如果要开发这个功能时，可以很快上手。</p>
<p>—– That’s all,thank you.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://univer2012.github.io/2017/04/23/1How-to-change-App-theme-color/" data-id="cj1tn2tfz0000h7fcl5us1l26" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thinkive/">thinkive</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/22/hello-world/" class="article-date">
  <time datetime="2017-04-22T12:59:36.000Z" itemprop="datePublished">2017-04-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/22/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://univer2012.github.io/2017/04/22/hello-world/" data-id="cj1tn2ti6000bh7fc656zctu2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/如何搭建个人博客/">如何搭建个人博客</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/thinkive/">thinkive</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/thinkive/" style="font-size: 10px;">thinkive</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/04/23/6how-to-insert-picture-in-hexo-blog/">hexo博客中如何插入图片</a>
          </li>
        
          <li>
            <a href="/2017/04/23/5how-to-issue-blog/">怎样发布博客</a>
          </li>
        
          <li>
            <a href="/2017/04/23/4UITableViewHeaderFooterView-section-header-reuse-mechanism/">UITableViewHeaderFooterView分组头部的重用机制ism</a>
          </li>
        
          <li>
            <a href="/2017/04/23/3optimize-HuaAn-iOS-installation-package-size/">华安iOS安装包大小的优化</a>
          </li>
        
          <li>
            <a href="/2017/04/23/2install-or-update-gem-in-macOS-Sierra-in-edition10-12-2/">在macOS Sierra(版本 10.12.2)安装/更新gem</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 黄胜军<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>